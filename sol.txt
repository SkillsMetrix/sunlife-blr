
import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'

export const fetchUsers=createAsyncThunk('users/fetchUsers',async()=> {

    const response= await fetch('https://jsonplaceholder.typicode.com/users')
    const users=await response.json()
    return users
 })
 const usersSlice=createSlice({
    name:"users",
    initialState:{
        entities:[],
        loading:false
    },
    reducers:{
        usersAdded(state,action) {
            state.entities.push(action.payload)
        }
    },
    extraReducers:{
        [fetchUsers.pending]:(state,action)=>{
            state.loading=true
        },
        [fetchUsers.fulfilled]:(state,action)=>{
            state.loading=false
            state.entities=[...state.entities,...action.payload]
        }
    }
 })
export const{usersAdded}= usersSlice.actions
export default usersSlice.reducer
