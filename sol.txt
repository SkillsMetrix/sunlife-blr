import React, { useState } from "react";
import {useNavigate} from 'react-router-dom'
import '../errors.css'

function Login(props) {
    const [users, setUsers] = useState([]);
    const [errors,setErrors]= useState({})
    const navigate= useNavigate()
    const handleChange = (e) => {
      setUsers({ ...users, [e.target.name]: e.target.value });
    };
    const login=(e)=>{
        e.preventDefault();
        const formError= validateForm(users)
        setErrors(formError)
        if(Object.keys(formError).length === 0){
       
            let details=JSON.parse(localStorage.getItem('sunlife'))
            if(details.uname == users.uname && details.email==users.email){
           navigate("/register")
        }
    }
    const validateForm=(data)=>{
      const errors={}
      if(!data.uname){
          errors.uname="username is required..!"
      }
      return errors
    }
    return (
      <div>
        <form onSubmit={login}>
         UserName <input type="text" name="uname" onChange={handleChange} />
         <p>{errors.uname && <span>{errors.uname}</span>}</p>
         Email:<input type="email" name="email" onChange={handleChange} />
          <button className="btn btn-primary">Login</button>
        </form>
      </div>
    );
}
}
export default Login;
