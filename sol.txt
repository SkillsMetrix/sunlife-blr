import React, { useState } from "react";
import {useNavigate} from 'react-router-dom'

function Register(props) {
  const [users, setUsers] = useState([]);
  const [errors,setErrors]= useState({})
  const navigate= useNavigate()
  const handleChange = (e) => {
    setUsers({ ...users, [e.target.name]: e.target.value });
  };
  const addUser=(e)=>{
      e.preventDefault();
      const formError= validateForm(users)
      setErrors(formError)
      if(Object.keys(formError).length === 0)
      localStorage.setItem('sunlife',JSON.stringify(users))
      navigate("/login")
  }
  const validateForm=(data)=>{
    const errors={}
    if(!data.uname){
        errors.uname="username is required..!"
    }
    return errors
  }
  return (
    <div>
      <form onSubmit={addUser}>
       UserName <input type="text" name="uname" onChange={handleChange} />
       <p>{errors.uname && <span>{errors.uname}</span>}</p>
       Email:<input type="email" name="email" onChange={handleChange} />
        <button className="btn btn-primary">Add User</button>
      </form>
    </div>
  );
}

export default Register;
